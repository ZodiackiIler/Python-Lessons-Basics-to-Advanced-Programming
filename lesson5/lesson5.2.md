## Урок 5: Работа с базами данных MySQL

В этом уроке мы рассмотрим работу с базами данных MySQL в языке программирования Python. Вы научитесь подключаться к базе данных MySQL, выполнять запросы и манипуляции данными, а также обрабатывать ошибки и исключения, связанные с базой данных MySQL.

Часть 1: Подключение к базе данных MySQL

Для работы с базами данных MySQL в Python нам понадобится использовать библиотеку `mysql-connector-python`. Убедитесь, что вы установили эту библиотеку перед началом работы.

Пример: Подключение к базе данных MySQL с использованием библиотеки `mysql-connector-python`

```python
import mysql.connector

# Подключение к базе данных MySQL
conn = mysql.connector.connect(
    host="localhost",
    user="username",
    password="password",
    database="mydatabase"
)

# Создание объекта курсора
cursor = conn.cursor()

# Выполнение SQL-запросов
# ...

# Закрытие соединения с базой данных
conn.close()
```

В этом примере мы импортируем библиотеку `mysql.connector` и подключаемся к базе данных MySQL с помощью функции `connect()`. Мы указываем хост, имя пользователя, пароль и название базы данных, к которой хотим подключиться. Затем мы создаем объект курсора с помощью метода `cursor()`. Курсор используется для выполнения SQL-запросов и манипуляций с данными. После окончания работы с базой данных соединение следует закрыть с помощью метода `close()`.

Часть 2: Запросы и манипуляции данными

После подключения к базе данных MySQL мы можем выполнять SQL-запросы и манипуляции данными, такие как создание таблиц, вставка, обновление и удаление данных и другие операции.

Пример: Выполнение SQL-запроса для создания таблицы

```python
# Создание таблицы
cursor.execute("CREATE TABLE IF NOT EXISTS employees (id INT AUTO_INCREMENT PRIMARY KEY, name VARCHAR(255), age INT)")
```

В этом примере мы используем метод `execute()` курсора для выполнения SQL-запроса создания таблицы "employees". Если таблица уже существует, то операция будет проигнорирована благодаря условию `IF NOT EXISTS`.

Пример: Выполнение SQL-запроса для вставки данных

```python
# Вставка данных в таблицу
cursor.execute("INSERT INTO employees (name, age) VALUES (%s, %s)", ("John", 30))
```

В этом примере мы используем метод `execute()` для выполнения SQL-запроса вставки данных в таблицу "employees". Значения для вставки указываются в виде кортежа и передаются вторым аргументом метода `execute()`.

Часть 3: Обработка ошибок и исключений

При работе с базами данных MySQL могут возникать ошибки и исключения, связанные с соединением, запросами и другими операциями. Важно обрабатывать эти ошибки, чтобы обеспечить надежность и безопасность вашей программы.

Пример: Обработка ошибок и исключений при выполнении запроса

```python
try:
    # Выполнение SQL-запроса
    cursor.execute("SELECT * FROM employees")
    
    # Получение результатов
    results = cursor.fetchall()
    
    # Обработка результатов
    for row in results:
        print(row)
except mysql.connector.Error as e:
    # Обработка ошибок
    print("Ошибка при выполнении запроса:", e)
finally:
    # Закрытие курсора
    cursor.close()
    # Закрытие соединения с базой данных
    conn.close()
```

В этом примере мы используем конструкцию `try-except` для обработки исключений, которые могут возникнуть при выполнении SQL-запроса. В блоке `try` мы выполняем запрос и получаем результаты с помощью метода `fetchall()`. Если возникает исключение типа `mysql.connector.Error`, оно перехватывается блоком `except`, и мы можем обработать ошибку или вывести сообщение об ошибке. В блоке `finally` мы закрываем курсор и соединение с базой данных, чтобы освободить ресурсы.

Работа с базами данных MySQL открывает широкие возможности для хранения и управления данными. Python предоставляет удобные инструменты для работы с базами данных MySQL, что делает их обработку более эффективной и удобной.
